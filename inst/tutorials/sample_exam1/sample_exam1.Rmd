---
title: "Sample Exam 1"
tutorial:
  id: "isds_sexam"
  version: 0.2
  
output:
  ISDSfunctions::tutorial:
    progressive: false
    allow_skip: true
runtime: shiny_prerendered
description: >
  This proficiency exam covers Preface - Chapter 4.
---

```{r setup, include=FALSE}
library(learnr)
library(tidyverse)
library(skimr)
library(ISDSfunctions)
library(gradethis)

gradethis_setup()

isds_setup(isds_exam = TRUE)

knitr::opts_chunk$set(echo = FALSE)

load("data/cdc.rda")
```

```{r, context = "server"}
lock_server("lock", graded = c("Q-2"), graded_pts = c(2))
reset_server("reset")
```

```{r Name}
# student name
question_blank("Name: ___",
              answer_fn(function(value){
                              if(length(value) >= 1 ) {
                                return(mark_as(TRUE))
                                }
                              return(mark_as(FALSE) )
                              }),
              correct = "Submitted",
              incorrect = "Submitted",
              allow_retry = FALSE )
```


## Instructions

You have 50 minutes to complete this exam. The exam covers the material learned from Preface - Chapter 4. You are allowed one page of notes front and back.

Once you are finished:

-   Make sure every question/exercise has been submitted.
-   In the submit section click the 'lock exam' button. You will not be able to make any changes once this is clicked. 
-   Once the exam is locked you will be able to click on the 'download exam' button.
-   Submit the completed html to Canvas.


## Concept

```{r Q}
#reading check 2
quiz(
  caption = NULL,
  #Q1
  question_dropdown(
  "Q1) The following code is in a code chunk: $\\quad 8/2 \\; = 4$
  <br/> What is the output?",
  answer("4"),
  answer("TRUE"),
  answer("FALSE"),
  answer("NA"),
  answer("Error", correct = TRUE),
  answer("0"),
  allow_retry = TRUE,
  incorrect = "Submitted"),
  question_dropdown(
    "Q2) In a typical dataframe, cells correspond to ___.",
    answer("columns"),
    answer("rows"),
    answer("values", correct = TRUE),
    answer("variables"),
    answer("observations"),
    allow_retry = TRUE,
    incorrect = "Submitted"
  ),
  question_dropdown(
  "Q3) Which of the following shows the relationship between two categorical variables?",
    answer("linegraph"),
    answer("histogram"),
    answer("stacked barplot", correct = TRUE),
    answer("grouped boxplot"),
    answer("none of these"),
  allow_retry = TRUE,
  incorrect = "Submitted"
  ),
  question_blank(
  "Q4) We use `geom_jitter()` and/or transparancy of points (alpha) to solve what specific issue when making scatterplots? ___",
  answer(c("overplotting"), correct = TRUE),
  allow_retry = TRUE,
  incorrect = "Submitted"
  ),
 question_dropdown(
  paste("Q5) The table provides data for a single individual, John Statman, who received a health evaluation every five years from the age of 20-55. <br/>", htmltools::img(src="images/01_tableC.png", height = 300, width = 700), " <br/> <br/> Which type of graphic would be most useful for visualizing the relationship between `Age` and `Weight`?"),
    answer("histogram"),
    answer("scatterplot"),
    answer("linegraph", correct = TRUE),
    answer("boxplot"),
    answer("barplot"),
  allow_retry = TRUE,
  incorrect = "Submitted"
  ),
 question_blank("Q6) In the table above, how many variables are categorical? ___",
    answer(c("3"), correct = TRUE),
    allow_retry = TRUE,
    incorrect = "Submitted"
 ),
  question_dropdown(
  paste("Q7) Below is a boxplot of a unimodal distribution. Which of the following statements is TRUE concerning this distribution? <br/>", htmltools::img(src="images/02_boxplot.png", height = 350, width = 400) ),
  #box = 11,
  answer("The distribution is skewed left and the mean is less than the median."),
  answer("The distribution is skewed right and the mean is less than the median."),
  answer("The distribution is skewed left and the mean is greater than the median."),
  answer("The distribution is skewed right and the mean is greater than the median.", correct = TRUE),
  answer("The distribution is symmetric and the mean is equal to the median."),
  allow_retry = TRUE,
  incorrect = "Submitted"
  ),
  question_wordbank(
  "Q8) Suppose we have a dataset of 500 student's exam scores for a lecture class. The professor decided to curve the exam such that 5 points were added to everyone's exam score.",
  box = 8,
  choices = c("How would the average exam score change?",
              "How would the median exam score change?",
              "How would the range of exam scores change?"),
  wordbank = c("Increase","Decrease", "Stay the same"),
  answer(c("Increase", "Increase", "Stay the same"), correct = TRUE),
  allow_retry = TRUE,
  incorrect = "Submitted"
  ),
 question_blank(
  "Q9) Name one statistic that is invariant to outliers. ___",
  answer(c("median"), correct = TRUE),
  allow_retry = TRUE,
  incorrect = "Submitted"
  ),
  question_wordbank(
  "Q10) Match each task with the appropriate function/verb that will accomplish it.",
  box = 4,
  arrange = "ordered",
  choices = c("initialize the plotting space", "keep only desired variables", "pipe operator for linking wrangling functions"),
  wordbank = c("%>%", "count()", "ggplot()", "filter()", "select()", "+", "geom_*()"),
  answer(c("ggplot()", "select()", "%>%"), correct = TRUE),
  allow_retry = TRUE,
  incorrect = "Submitted"
  ),
  question_dropdown(
  "Q11) Suppose we have a dataset (some data) and we want to calculate the mean of one of the numerical variables per level/category for a categorical variable and then order the results with the smallest mean at the top of the output. Which general sequence of functions/verbs would achieve this?",
  #box = 11,
  answer("some data %>% filter() %>% summarize() %>% arrange()"),
  answer("some data %>% filter() %>% summarize() %>% arrange(desc())"),
  answer("some data %>% arrange() %>% filter() %>% summarize()"),
  answer("some data %>% arrange() %>% count()"),
  answer("some data %>% group_by() %>% summarize() %>% arrange()", correct = TRUE),
  answer("some data %>% group_by() %>% summarize() %>% arrange(desc())"),
  allow_retry = TRUE,
  incorrect = "Submitted"
  )
  
)

```


## Application

The following applications use the `cdc` dataset which has been preloaded for you. See the **CDC Dataset tab** for more information about the dataset

- **Important**: If you wrote more than the space provides, **after** you click submit. Put your mouse in the bottom right corner of the box and drag it down to make it longer (don't make it wider or it will cut off while printing).

### Application 1

Construct a side-by-side boxplot of `height` by `gender`.

```{r App1, exercise=TRUE}

```


```{r App1-solution, exercise.reveal_solution = FALSE}
ggplot(cdc, aes(x = gender, y = height)) +
  geom_boxplot()
```

```{r App1-code-check}
grade_this_code(
  correct = "Submitted",
  incorrect = "Submitted"
)
```

Describe and compare the distribution, including center, spread, skew, and outliers.

```{r App1-desc}
question_text("", incorrect = "Submitted",
              answer("ManuallyGradedEverythingWrong", 
                     correct = TRUE),
              allow_retry = TRUE,
              rows = 7)
```

### Application 2

For male survey participants, compute the count of men in each `genhlth` category. 

Then add a new variable called `proportion` which is equal to the `count/sum(count)`. Where `count` should be whatever you called your variable. 

Make sure you print/output your results.

```{r App2, exercise=TRUE}

```


### Application 3

Construct a barplot that shows the relationship of `gender` in each of the `genhlth` groups?

```{r App3, exercise=TRUE}

```

Explain what the barplot tells us about the relationship between `genhlth` and `gender` for our respondents.

```{r App3-describe}
question_text("", incorrect = "Submitted",
              answer("ManuallyGradedEverythingWrong", 
                     correct = TRUE),
              allow_retry = TRUE,
              rows = 7)
```

## CDC Data Codebook

Each variable corresponds to a question that was asked in the survey.

- `genhlth`, respondents were asked to evaluate their general health, responding either excellent, very good, good, fair or poor. 
- `exerany` variable indicates whether the respondent exercised in the past month (`1`) or did not (`0`).
- `hlthplan` indicates whether the respondent had some form of health 
coverage (`yes`) or did not (`no`). 
- `smoke100` variable indicates whether the respondent had smoked at least 100 cigarettes in her lifetime: `yes` they have or `no` they have not. 
- `height` respondent's height in inches
- `weight` respondent's weight in pounds
- `wtdesire` their desired weight
- `age` in years, 
- `gender` (recorded as `m` or `f`).

Glimpse the data

```{r}
glimpse(cdc)
```

Skim the data

```{r}
skim(cdc)
```


## Submit

Once you are finished:

-   **No Name = 0 grade**
-   Click the 'lock' button below. Once you click this you will not be able to make any changes to your exam!
-   Once the lock is pressed a `print` option will become available
-   Click print and submit the downloaded html to Canvas.

```{r}
lock_button_ui(id = "lock")
reset_button_ui(id = "reset")
```
